<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Insert Position - JS vs TS</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #1e1e2e, #313244);
            color: #cdd6f4;
            line-height: 1.6;
        }
        
        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .code-section {
            background: #181825;
            border-radius: 12px;
            padding: 25px;
            border: 2px solid #45475a;
            position: relative;
            overflow: auto;
        }
        
        .language-title {
            background: linear-gradient(45deg, #f38ba8, #fab387);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .js-title {
            background: linear-gradient(45deg, #f9e2af, #fab387);
        }
        
        .ts-title {
            background: linear-gradient(45deg, #89b4fa, #74c7ec);
        }
        
        pre {
            background: #11111b;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            border-left: 4px solid #f38ba8;
            margin: 15px 0;
            font-size: 13px;
            line-height: 1.5;
        }
        
        .js-code pre {
            border-left-color: #f9e2af;
        }
        
        .ts-code pre {
            border-left-color: #89b4fa;
        }
        
        .keyword {
            color: #cba6f7;
            font-weight: bold;
        }
        
        .string {
            color: #a6e3a1;
        }
        
        .number {
            color: #fab387;
        }
        
        .comment {
            color: #6c7086;
            font-style: italic;
        }
        
        .type {
            color: #89b4fa;
            font-weight: bold;
        }
        
        .function-name {
            color: #74c7ec;
        }
        
        .difference-box {
            background: #1e1e2e;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #f38ba8;
        }
        
        .difference-title {
            color: #f38ba8;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .test-section {
            background: #181825;
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
            border: 2px solid #45475a;
        }
        
        .test-title {
            background: linear-gradient(45deg, #a6e3a1, #94e2d5);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .test-output {
            background: #11111b;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #a6e3a1;
            white-space: pre-line;
            font-family: monospace;
        }
        
        button {
            background: linear-gradient(45deg, #f38ba8, #fab387);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            margin: 10px 5px;
            transition: transform 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
        }
        
        .highlight {
            background: #45475a;
            padding: 2px 4px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <h1 style="text-align: center; background: linear-gradient(45deg, #f38ba8, #89b4fa); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-size: 2.5em;">
        ğŸ” Search Insert Position
    </h1>
    <h2 style="text-align: center; color: #a6adc8; margin-bottom: 40px;">JavaScript vs TypeScript èªæ³•æ¯”è¼ƒ</h2>

    <div class="container">
        <!-- JavaScript ç‰ˆæœ¬ -->
        <div class="code-section js-code">
            <div class="language-title js-title">
                ğŸ“œ JavaScript ç‰ˆæœ¬
            </div>
            
            <pre><code><span class="comment">/**
 * åœ¨æ’åºé™£åˆ—ä¸­å°‹æ‰¾ç›®æ¨™å€¼çš„æ’å…¥ä½ç½®
 * @param {number[]} nums - æ’åºçš„æ•´æ•¸é™£åˆ—
 * @param {number} target - ç›®æ¨™å€¼
 * @returns {number} ç›®æ¨™å€¼çš„ç´¢å¼•æˆ–æ’å…¥ä½ç½®
 */</span>
<span class="keyword">function</span> <span class="function-name">searchInsert</span>(nums, target) {
    <span class="keyword">let</span> left = <span class="number">0</span>;
    <span class="keyword">let</span> right = nums.length - <span class="number">1</span>;
    
    <span class="keyword">while</span> (left <= right) {
        <span class="keyword">const</span> mid = left + Math.floor((right - left) / <span class="number">2</span>);
        
        <span class="keyword">if</span> (nums[mid] === target) {
            <span class="keyword">return</span> mid;
        } <span class="keyword">else if</span> (nums[mid] < target) {
            left = mid + <span class="number">1</span>;
        } <span class="keyword">else</span> {
            right = mid - <span class="number">1</span>;
        }
    }
    
    <span class="keyword">return</span> left;
}</code></pre>

            <div class="difference-box">
                <div class="difference-title">JavaScript ç‰¹è‰²ï¼š</div>
                â€¢ å‹•æ…‹å‹åˆ¥ï¼Œä¸éœ€è¦è²æ˜è®Šæ•¸å‹åˆ¥<br>
                â€¢ ä½¿ç”¨ JSDoc è¨»è§£ä¾†èªªæ˜åƒæ•¸å‹åˆ¥<br>
                â€¢ å‡½å¼åƒæ•¸æ²’æœ‰å‹åˆ¥æª¢æŸ¥<br>
                â€¢ é‹è¡Œæ™‚æ‰æœƒç™¼ç¾å‹åˆ¥éŒ¯èª¤
            </div>
        </div>

        <!-- TypeScript ç‰ˆæœ¬ -->
        <div class="code-section ts-code">
            <div class="language-title ts-title">
                ğŸ”· TypeScript ç‰ˆæœ¬
            </div>
            
            <pre><code><span class="comment">/**
 * åœ¨æ’åºé™£åˆ—ä¸­å°‹æ‰¾ç›®æ¨™å€¼çš„æ’å…¥ä½ç½®
 * @param nums - æ’åºçš„æ•´æ•¸é™£åˆ—
 * @param target - ç›®æ¨™å€¼
 * @returns ç›®æ¨™å€¼çš„ç´¢å¼•æˆ–æ’å…¥ä½ç½®
 */</span>
<span class="keyword">function</span> <span class="function-name">searchInsert</span>(nums<span class="type">: number[]</span>, target<span class="type">: number</span>)<span class="type">: number</span> {
    <span class="keyword">let</span> left<span class="type">: number</span> = <span class="number">0</span>;
    <span class="keyword">let</span> right<span class="type">: number</span> = nums.length - <span class="number">1</span>;
    
    <span class="keyword">while</span> (left <= right) {
        <span class="keyword">const</span> mid<span class="type">: number</span> = left + Math.floor((right - left) / <span class="number">2</span>);
        
        <span class="keyword">if</span> (nums[mid] === target) {
            <span class="keyword">return</span> mid;
        } <span class="keyword">else if</span> (nums[mid] < target) {
            left = mid + <span class="number">1</span>;
        } <span class="keyword">else</span> {
            right = mid - <span class="number">1</span>;
        }
    }
    
    <span class="keyword">return</span> left;
}</code></pre>

            <div class="difference-box">
                <div class="difference-title">TypeScript ç‰¹è‰²ï¼š</div>
                â€¢ éœæ…‹å‹åˆ¥æª¢æŸ¥ï¼Œç·¨è­¯æ™‚å°±èƒ½ç™¼ç¾éŒ¯èª¤<br>
                â€¢ æ˜ç¢ºçš„åƒæ•¸å’Œå›å‚³å€¼å‹åˆ¥è²æ˜<br>
                â€¢ æ›´å¥½çš„ IDE æ”¯æ´å’Œè‡ªå‹•è£œå…¨<br>
                â€¢ å‹åˆ¥å®‰å…¨ï¼Œæ¸›å°‘é‹è¡Œæ™‚éŒ¯èª¤
            </div>
        </div>
    </div>

    <!-- é€²éšç‰ˆæœ¬æ¯”è¼ƒ -->
    <div class="container">
        <div class="code-section js-code">
            <h3 style="color: #f9e2af;">JavaScript - æ›´å¤šç‰¹æ€§</h3>
            <pre><code><span class="comment">// ç®­é ­å‡½å¼ç‰ˆæœ¬</span>
<span class="keyword">const</span> <span class="function-name">searchInsertArrow</span> = (nums, target) => {
    <span class="keyword">let</span> [left, right] = [<span class="number">0</span>, nums.length - <span class="number">1</span>];
    
    <span class="keyword">while</span> (left <= right) {
        <span class="keyword">const</span> mid = (left + right) >> <span class="number">1</span>; <span class="comment">// ä½ç§»é‹ç®—</span>
        
        <span class="keyword">if</span> (nums[mid] === target) <span class="keyword">return</span> mid;
        nums[mid] < target ? left = mid + <span class="number">1</span> : right = mid - <span class="number">1</span>;
    }
    
    <span class="keyword">return</span> left;
};

<span class="comment">// ä½¿ç”¨é™£åˆ—è§£æ§‹å’Œä¸‰å…ƒé‹ç®—å­</span>
<span class="keyword">const</span> <span class="function-name">binarySearch</span> = (arr, val) => 
    arr.reduce((pos, curr, idx) => 
        curr === val ? idx : pos, 
        arr.findIndex(x => x >= val) === -<span class="number">1</span> ? arr.length : arr.findIndex(x => x >= val)
    );</code></pre>
        </div>

        <div class="code-section ts-code">
            <h3 style="color: #89b4fa;">TypeScript - æ³›å‹å’Œä»‹é¢</h3>
            <pre><code><span class="comment">// æ³›å‹ç‰ˆæœ¬ï¼Œæ”¯æ´ä¸åŒå‹åˆ¥</span>
<span class="keyword">function</span> <span class="function-name">searchInsertGeneric</span>&lt;<span class="type">T</span>&gt;(
    nums<span class="type">: T[]</span>, 
    target<span class="type">: T</span>, 
    compareFn<span class="type">: (a: T, b: T) => number = (a, b) => (a as any) - (b as any)</span>
)<span class="type">: number</span> {
    <span class="keyword">let</span> left<span class="type">: number</span> = <span class="number">0</span>;
    <span class="keyword">let</span> right<span class="type">: number</span> = nums.length - <span class="number">1</span>;
    
    <span class="keyword">while</span> (left <= right) {
        <span class="keyword">const</span> mid<span class="type">: number</span> = Math.floor((left + right) / <span class="number">2</span>);
        <span class="keyword">const</span> comparison<span class="type">: number</span> = compareFn(nums[mid], target);
        
        <span class="keyword">if</span> (comparison === <span class="number">0</span>) <span class="keyword">return</span> mid;
        comparison < <span class="number">0</span> ? left = mid + <span class="number">1</span> : right = mid - <span class="number">1</span>;
    }
    
    <span class="keyword">return</span> left;
}

<span class="comment">// å®šç¾©ä»‹é¢</span>
<span class="keyword">interface</span> <span class="type">SearchResult</span> {
    index<span class="type">: number</span>;
    found<span class="type">: boolean</span>;
    insertPosition<span class="type">: number</span>;
}

<span class="keyword">const</span> <span class="function-name">searchWithDetails</span> = (nums<span class="type">: number[]</span>, target<span class="type">: number</span>)<span class="type">: SearchResult</span> => ({
    index: searchInsert(nums, target),
    found: nums.includes(target),
    insertPosition: searchInsert(nums, target)
});</code></pre>
        </div>
    </div>

    <div class="test-section">
        <div class="test-title">ğŸ§ª å¯¦éš›æ¸¬è©¦æ¯”è¼ƒ</div>
        
        <button onclick="runJavaScriptTests()">æ¸¬è©¦ JavaScript ç‰ˆæœ¬</button>
        <button onclick="runTypeScriptTests()">æ¸¬è©¦ TypeScript ç‰ˆæœ¬</button>
        <button onclick="comparePerformance()">æ•ˆèƒ½æ¯”è¼ƒ</button>
        <button onclick="showTypeDifference()">å‹åˆ¥å·®ç•°ç¤ºä¾‹</button>
        
        <div id="testOutput" class="test-output"></div>
    </div>

    <script>
        // JavaScript å¯¦ä½œ
        function searchInsert(nums, target) {
            let left = 0;
            let right = nums.length - 1;
            
            while (left <= right) {
                const mid = left + Math.floor((right - left) / 2);
                
                if (nums[mid] === target) {
                    return mid;
                } else if (nums[mid] < target) {
                    left = mid + 1;
                } else {
                    right = mid - 1;
                }
            }
            
            return left;
        }

        // TypeScript é¢¨æ ¼çš„å¯¦ä½œï¼ˆåœ¨ JS ä¸­æ¨¡æ“¬ï¼‰
        function searchInsertTS(nums, target) {
            // æ¨¡æ“¬å‹åˆ¥æª¢æŸ¥
            if (!Array.isArray(nums)) {
                throw new Error('nums must be an array');
            }
            if (typeof target !== 'number') {
                throw new Error('target must be a number');
            }
            
            let left = 0;
            let right = nums.length - 1;
            
            while (left <= right) {
                const mid = left + Math.floor((right - left) / 2);
                
                if (nums[mid] === target) {
                    return mid;
                } else if (nums[mid] < target) {
                    left = mid + 1;
                } else {
                    right = mid - 1;
                }
            }
            
            return left;
        }

        function runJavaScriptTests() {
            const output = document.getElementById('testOutput');
            const testCases = [
                [[1, 3, 5, 6], 5, 2],
                [[1, 3, 5, 6], 2, 1],
                [[1, 3, 5, 6], 7, 4],
                [[1, 3, 5, 6], 0, 0]
            ];
            
            let result = "ğŸŸ¡ JavaScript æ¸¬è©¦çµæœï¼š\n\n";
            
            testCases.forEach(([nums, target, expected], i) => {
                const actual = searchInsert(nums, target);
                const status = actual === expected ? "âœ…" : "âŒ";
                result += `æ¸¬è©¦ ${i + 1}: ${status}\n`;
                result += `  è¼¸å…¥: nums = [${nums.join(', ')}], target = ${target}\n`;
                result += `  é æœŸ: ${expected}, å¯¦éš›: ${actual}\n\n`;
            });
            
            // å±•ç¤º JavaScript çš„éˆæ´»æ€§ï¼ˆä¹Ÿæ˜¯ç¼ºé»ï¼‰
            result += "ğŸ” JavaScript éˆæ´»æ€§ç¤ºä¾‹ï¼š\n";
            result += `searchInsert([1, "3", 5], 4) = ${searchInsert([1, "3", 5], 4)}\n`;
            result += `searchInsert("123", 2) = ${searchInsert("123", 2)} (å­—ä¸²ä¹Ÿèƒ½ç”¨ï¼)\n`;
            
            output.textContent = result;
        }

        function runTypeScriptTests() {
            const output = document.getElementById('testOutput');
            const testCases = [
                [[1, 3, 5, 6], 5, 2],
                [[1, 3, 5, 6], 2, 1],
                [[1, 3, 5, 6], 7, 4],
                [[1, 3, 5, 6], 0, 0]
            ];
            
            let result = "ğŸ”· TypeScript é¢¨æ ¼æ¸¬è©¦çµæœï¼š\n\n";
            
            testCases.forEach(([nums, target, expected], i) => {
                try {
                    const actual = searchInsertTS(nums, target);
                    const status = actual === expected ? "âœ…" : "âŒ";
                    result += `æ¸¬è©¦ ${i + 1}: ${status}\n`;
                    result += `  è¼¸å…¥: nums = [${nums.join(', ')}], target = ${target}\n`;
                    result += `  é æœŸ: ${expected}, å¯¦éš›: ${actual}\n\n`;
                } catch (error) {
                    result += `æ¸¬è©¦ ${i + 1}: âŒ éŒ¯èª¤: ${error.message}\n\n`;
                }
            });
            
            // å±•ç¤ºå‹åˆ¥æª¢æŸ¥
            result += "ğŸ›¡ï¸ å‹åˆ¥å®‰å…¨ç¤ºä¾‹ï¼š\n";
            try {
                searchInsertTS([1, "3", 5], 4);
            } catch (e) {
                result += `æ··åˆå‹åˆ¥é™£åˆ—: âŒ ${e.message}\n`;
            }
            
            try {
                searchInsertTS("123", 2);
            } catch (e) {
                result += `å­—ä¸²è¼¸å…¥: âŒ ${e.message}\n`;
            }
            
            output.textContent = result;
        }

        function comparePerformance() {
            const output = document.getElementById('testOutput');
            const largeArray = Array.from({length: 10000}, (_, i) => i * 2);
            const target = 9999;
            
            // JavaScript ç‰ˆæœ¬æ¸¬è©¦
            const startJS = performance.now();
            for (let i = 0; i < 1000; i++) {
                searchInsert(largeArray, target);
            }
            const endJS = performance.now();
            
            // TypeScript é¢¨æ ¼ç‰ˆæœ¬æ¸¬è©¦
            const startTS = performance.now();
            for (let i = 0; i < 1000; i++) {
                searchInsertTS(largeArray, target);
            }
            const endTS = performance.now();
            
            const result = `âš¡ æ•ˆèƒ½æ¯”è¼ƒçµæœï¼š\n\n` +
                `JavaScript ç‰ˆæœ¬: ${(endJS - startJS).toFixed(2)}ms\n` +
                `TypeScript é¢¨æ ¼: ${(endTS - startTS).toFixed(2)}ms\n\n` +
                `æ³¨æ„ï¼šTypeScript é¢¨æ ¼åŒ…å«äº†é¡å¤–çš„å‹åˆ¥æª¢æŸ¥ï¼Œ\n` +
                `åœ¨å¯¦éš› TypeScript ç·¨è­¯å¾Œï¼Œæ•ˆèƒ½æœƒæ›´æ¥è¿‘ JavaScriptã€‚\n\n` +
                `æ¸¬è©¦é™£åˆ—å¤§å°: 10,000 å…ƒç´ \n` +
                `åŸ·è¡Œæ¬¡æ•¸: 1,000 æ¬¡\n` +
                `æ¼”ç®—æ³•è¤‡é›œåº¦: O(log n)`;
            
            output.textContent = result;
        }

        function showTypeDifference() {
            const output = document.getElementById('testOutput');
            
            const result = `ğŸ” JavaScript vs TypeScript ä¸»è¦å·®ç•°ï¼š\n\n` +
                `ğŸ“œ JavaScript:\n` +
                `â€¢ å‹•æ…‹å‹åˆ¥ï¼Œé‹è¡Œæ™‚æ‰æª¢æŸ¥å‹åˆ¥\n` +
                `â€¢ æ›´éˆæ´»ï¼Œä½†å®¹æ˜“å‡ºéŒ¯\n` +
                `â€¢ ç›´æ¥åœ¨ç€è¦½å™¨åŸ·è¡Œ\n` +
                `â€¢ å­¸ç¿’æˆæœ¬è¼ƒä½\n\n` +
                
                `ğŸ”· TypeScript:\n` +
                `â€¢ éœæ…‹å‹åˆ¥ï¼Œç·¨è­¯æ™‚æª¢æŸ¥å‹åˆ¥\n` +
                `â€¢ æ›´å®‰å…¨ï¼Œæ¸›å°‘é‹è¡Œæ™‚éŒ¯èª¤\n` +
                `â€¢ éœ€è¦ç·¨è­¯æˆ JavaScript åŸ·è¡Œ\n` +
                `â€¢ å­¸ç¿’æˆæœ¬è¼ƒé«˜ï¼Œä½†é–‹ç™¼é«”é©—æ›´å¥½\n\n` +
                
                `ğŸ’¡ é¸æ“‡å»ºè­°ï¼š\n` +
                `â€¢ å°å°ˆæ¡ˆã€å¿«é€Ÿé–‹ç™¼ â†’ JavaScript\n` +
                `â€¢ å¤§å‹å°ˆæ¡ˆã€åœ˜éšŠå”ä½œ â†’ TypeScript\n` +
                `â€¢ éœ€è¦å‹åˆ¥å®‰å…¨ â†’ TypeScript\n` +
                `â€¢ å­¸ç¿’éšæ®µ â†’ å…ˆ JavaScript å† TypeScript`;
            
            output.textContent = result;
        }

        // åˆå§‹åŒ–é¡¯ç¤º
        document.addEventListener('DOMContentLoaded', () => {
            showTypeDifference();
        });
    </script>
</body>
</html>